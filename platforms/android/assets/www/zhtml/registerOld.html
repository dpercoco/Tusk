<!DOCTYPE html>
<html>    
    <head>
        <title>
            register
        </title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta name="format-detection" content="telephone=no">
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
        <meta name="msapplication-tap-highlight" content="no">
        
        <!-- <link rel="stylesheet" href="files/resources/lib/jquery-ui/jquery-ui.css"/> <!-- icons -->   
         
        <link href="files/resources/lib/theme/jqm/jqm.css" rel="stylesheet" />
        <link href="files/resources/lib/theme/flat-ui/flat-ui.css" rel="stylesheet" />
        <link href="files/resources/lib/jquerymobile/1.4.4/jquery.mobile.structure-1.4.4.css" rel="stylesheet" />
        <link href="css/tusk.css" rel="stylesheet" />
         
        <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
		<script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>
		<link rel="stylesheet" href="files/resources/lib/jquery-ui/jquery-ui.js"/>
	    
	    <script src="cordova.js"></script>
		<script src="js/jquery.validate.js"></script>	
		<script src="js/database.js"></script>        
        
	    <script type="text/javascript">
            $(document).bind("mobileinit", function()
            {
                if (navigator.userAgent.toLowerCase().indexOf("android") != -1)
                {
                    $.mobile.defaultPageTransition = 'none';
                    $.mobile.defaultDialogTransition = 'none';
                }
                else if (navigator.userAgent.toLowerCase().indexOf("msie") != -1)
                {
                    $.mobile.allowCrossDomainPages = true;
                    $.support.cors = true;
                }
            });
        </script>
                           
        <script>
         			
          $(document).ready(function() {          
	   		$("#registerForm").validate({
				rules: {
					register_first: "required",
					register_last: "required",
					register_password: {
						required: true,
						minlength: 5
					},
					confirm_password: {
						required: true,
						minlength: 5,
						equalTo: "#password"
					},
					register_email: {
						required: true,
						email: true
					}
				},
				messages: {
					register_first: "Please enter your firstname",
					register_last: "Please enter your lastname",
					register_password: {
						required: "Please provide a password",
						minlength: "Your password must be at least 5 characters long"
					},
					confirm_password: {
						required: "Please provide a password",
						minlength: "Your password must be at least 5 characters long",
						equalTo: "Please enter the same password as above"
					},
					register_email: "Please enter a valid email address"
				}
			});
	
			// propose username by combining first- and lastname
			$("#register_email").focus(function() {
				var firstname = $("#register_first").val();
				var lastname = $("#register_last").val();
				if (firstname && lastname && !this.value) {
					this.value = firstname + "." + lastname;
				}
			});
		});
		
		
		function SubmitIfValid() {
			    if(!$("#registerForm").valid()) return false;
			    if (insertUser($('#register_email').val()    ,$('#register_password').val(),
			                   $('#register_firstname').val(),$('#register_lastname').val())) {
    				window.location.href="home.html"; 
    				return true;
    			}
			}
        </script>
    </head>
    
    <body>
        <div data-role="page" style="min-height:480px;" id="register" class="type-interior" data-theme="c">
            <!-- mobileheader,  -->
            <div data-role="header" data-position="fixed" id="register_mobileheader" data-theme="c" >
                <a href="login.html" target="_self" data-theme="c" data-icon="back" >
                </a>
                <!-- 
                
                <a href="login.html" target="_self" class="ui-icon ui-icon-circle-triangle-w ui-nodisc-icon"></a>
                <a href="login.html" target="_self" data-role="button" data-theme="c" data-icon="back" id="login_mobilenavbaritem_10" 
                   align="left">
                Back
                </a>
                 -->
                <h1>Register</h1>
            </div>
            
            <!-- mobilecontainer -->
            <div data-role="content" id="register_mobilecontainer" data-theme="c">
                <form id="registerForm" method="get" action="">
	                <!-- register_first -->
	                <div data-role="fieldcontain" class="no-field-separator">
	                    <input type="text" name="register_first" dsid="register_first" value="" placeholder="First Name"
	                    id="register_first" tabindex="1" multiple data-theme="c" class="register_register_first"
	                    />
	                </div>
	                <!-- register_last -->
	                <div data-role="fieldcontain" class="no-field-separator">
	                    <input type="text" name="register_last" dsid="register_last" value="" placeholder="Last Name"
	                    id="register_last" tabindex="2" multiple data-theme="c" class="register_register_last"
	                    />
	                </div>
	                <!-- register_email -->
	                <div data-role="fieldcontain" class="no-field-separator">
	                    <input type="email" name="register_email" dsid="register_email" value="" placeholder="Email"
	                    id="register_email" tabindex="3" multiple data-theme="c" class="register_register_email"
	                    />
	                </div>
	                <!-- register_password -->
	                <div data-role="fieldcontain" class="no-field-separator">
	                    <input type="password" name="register_password" dsid="register_password" value=""
	                    placeholder="Password" id="register_password" tabindex="4" multiple data-theme="c"
	                    class="register_register_password" />
	                </div>
	                
	                <!-- register_button -->	                
	                <div>
	                   <input type="submit" value="Create Account" onclick="return SubmitIfValid();" />
	                    <!--  <input type="submit" value="Create Account" />-->
		    		</div>
	                
	              
	            </form>
            </div>
            <!-- mobilefooter -->
            <div data-role="footer" data-position="fixed" id="register_mobilefooter" data-theme="c">
            </div>
        </div>
    </body>

</html>