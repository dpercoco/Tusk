<!DOCTYPE html>
<html>    
    <head>
        <title>
            Login
        </title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta name="format-detection" content="telephone=no">
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
        <meta name="msapplication-tap-highlight" content="no">
            
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.css"/>
        <link rel="stylesheet" href="files/resources/lib/theme/jqm/jqm.css" /> <!-- buttons -->
        <link rel="stylesheet" href="css/tusk.css" />
        <link rel="stylesheet" href="css/login.css" />
        
		<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
		<script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>
        
        <script src="js/jquery.validate.js"></script>	
		<script src="js/database.js"></script>	                             
        
        <script type="text/javascript">
            $(document).bind("mobileinit", function()  {
                $.mobile.loader.prototype.options.text = "loading";
				$.mobile.loader.prototype.options.textVisible = false;
				$.mobile.loader.prototype.options.theme = "c"; 
				$.mobile.loader.prototype.options.html = "";
				$.mobile.popup.prototype.options.overlayTheme = "c";
				
                if (navigator.userAgent.toLowerCase().indexOf("android") != -1)
                {
                    $.mobile.defaultPageTransition = 'none';
                    $.mobile.defaultDialogTransition = 'none';
                }
                else if (navigator.userAgent.toLowerCase().indexOf("msie") != -1)
                {
                    $.mobile.allowCrossDomainPages = true;
                    $.support.cors = true;
                }
            });
        				  
              $(document).ready(function() { 	          
	            
		   		$("#loginForm").validate({
					rules: {
						login_password: {
							required: true,
							minlength: 4
						},
						confirm_password: {
							required: true,
							minlength: 4,
							equalTo: "#password"
						},
						login_email: {
							required: true,
							email: true
						}
					},
					messages: {
						login_password: {
							required: "Please provide a password",
							minlength: "Your password must be at least 4 characters long"
						},
						confirm_password: {
							required: "Please provide a password",
							minlength: "Your password must be at least 4 characters long",
							equalTo: "Please enter the same password as above"
						},
						login_email: "Please enter a valid email address"
					}
				});
		
				// propose username by combining first- and lastname
				$("#login_email").focus(function() {
					var firstname = $("#login_first").val();
					var lastname = $("#login_last").val();
					if (firstname && lastname && !this.value) {
						this.value = firstname + "." + lastname;
					}
				});
			});
			
			
			function SubmitIfValid() {
			
			    if(!$("#loginForm").valid()) return false;			    
			    
			    //$.mobile.loading('show', {theme:"e", text:"Please wait...", textonly:true, textVisible: true});
			    //$.mobile.loading('hide');
			    
			    
			    if (validUser($('#login_email').val(),$('#login_password').val())) {
    				//window.location.href="rssFeeder.html"; 
    				return true;
    			}
			    return false;
			    
			}
        </script>
    
    </head>
    
    <body>
		
        <div data-role="page" style="min-height:480px;" id="login" class="type-interior" data-theme="c">
            <!-- mobileheader -->
            <div data-role="header" data-position="fixed" data-add-back-btn="false" data-theme="c" id="login_mobileheader">
               <h1>Tusk</h1>
            </div>
            
            <!-- mobilecontainer -->
            <div data-role="content" id="login_mobilecontainer" name="mobilecontainer" class="ui-content"
            dsid="mobilecontainer" data-theme="c">
                <form id="loginForm" method="get" action="">
	                <!-- login_email -->
	                <div>
	                    <input type="email" name="login_email" dsid="login_email" value="" placeholder="Email"
	                    id="login_email" tabindex="3" multiple data-theme="c" />
	                </div>
	                <!-- login_password -->
	                <div>
	                    <input type="password" name="login_password" dsid="login_password" value=""
	                    placeholder="Password" id="login_password" tabindex="4" multiple data-theme="c" />
	                </div>
	                
	               <div data-role="button" class="ui-btn ui-btn-inline ui-mini" style="text-align: center;">
	                    <input id="sign-in-button" type="submit" value="Sign In" onclick="return SubmitIfValid();" /> <!--   -->
	               </div>
                    
                    <!-- <a href="#myPopup" data-rel="popup" class="ui-btn ui-btn-inline ui-corner-all">Show Popup</a> -->
 					<div data-role="popup" id="myPopup" style="left:50%; margin-left:-50px;">
					  <p>Your username or password is invalid!</p>
					</div>   
            
                    <div data-role="Link" data-theme="d" style="text-align: center;">
                    	<a id="login_forgotLink" href="http://appery.io" name="forgotLink" dsid="forgotLink" 
                    	 style="font-size:10px;">Forgot your username or password?
	                    </a>
	                </div>
            
            		
      				<!-- 
	                <div id="spinner" class="spinner" style="display:none;">
					    <img id="img-spinner" src="" alt="Loading"/>
					</div>
					 -->
	            </form>
            </div>
            <!-- mobilefooter -->
            <div data-role="footer" data-position="fixed" class="login_mobilefooter" name="mobilefooter"
              id="login_mobilefooter" data-theme="c">
                <!-- mobilenavbar_9 -->
                <div data-role="navbar" id="login_mobilenavbar_9" name="mobilenavbar_9" 
                class="login_mobilenavbar_9" data-theme="c" style="position: relative;">
                    <ul>
                        <li>
                            <a data-icon="user-black" id="login_mobilenavbaritem_10" dsid="mobilenavbaritem_10"
                            name="mobilenavbaritem_10">
                            Register
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </body>

</html>